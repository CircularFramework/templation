{"version":3,"sources":["../../src/functions/using.function.js"],"names":["using","obj","code","ref","refData","decodingMap","entity","char","forEach","replace","m","properties","methods","Array","isArray","propertyNames","Object","getOwnPropertyNames","p","proto","getPrototypeOf","publicMethods","privateMethods","startsWith","push","index","indexOf","rm","splice","withFunc","Function","bind"],"mappings":";;;;;AAAA;AACA,SAASA,KAAT,CAAeC,GAAf,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,OAA/B,EAAwC;AACvC;AACA,KAAMC,cAAc,CACnB,EAAEC,QAAQ,MAAV,EAAkBC,MAAM,GAAxB,EADmB,EAEnB,EAAED,QAAQ,MAAV,EAAkBC,MAAM,GAAxB,EAFmB,EAGnB,EAAED,QAAQ,QAAV,EAAoBC,MAAM,GAA1B,EAHmB,EAInB,EAAED,QAAQ,OAAV,EAAmBC,MAAM,GAAzB,EAJmB,EAKnB,EAAED,QAAQ,OAAV,EAAmBC,MAAM,IAAzB,EALmB,EAMnB,EAAED,QAAQ,MAAV,EAAkBC,MAAM,IAAxB,EANmB,CAApB;AAQAF,aAAYG,OAAZ,CAAoB,aAAK;AACxBN,SAAOA,KAAKO,OAAL,CAAaC,EAAEJ,MAAf,EAAuBI,EAAEH,IAAzB,CAAP;AACA,EAFD;;AAIA;AACA,KAAII,aAAa,EAAjB;AACA,KAAIC,UAAU,EAAd;AACA,KAAI,CAACC,MAAMC,OAAN,CAAcb,GAAd,CAAL,EAAyB;AACxB;AACA,MAAIc,gBAAgBC,OAAOC,mBAAP,CAA2BhB,GAA3B,CAApB;AACAc,gBAAcP,OAAd,CAAsB,aAAK;AAC1BG,0BAAqBO,CAArB,eAAgCA,CAAhC;AACA,GAFD;;AAIA;AACA,MAAIC,QAAQH,OAAOI,cAAP,CAAsBnB,GAAtB,CAAZ;AACA,MAAIoB,gBAAgBL,OAAOC,mBAAP,CAA2BE,KAA3B,CAApB;AACA,MAAIG,iBAAiB,CAAC,aAAD,EAAgB,kBAAhB,EAAoC,kBAApC,EAAwD,gBAAxD,EAA0E,kBAA1E,EAA8F,kBAA9F,EAAkH,eAAlH,EAAmI,sBAAnI,EAA2J,UAA3J,EAAuK,SAAvK,EAAkL,WAAlL,EAA+L,gBAA/L,CAArB;AACAD,gBAAcb,OAAd,CAAsB;AAAA,UAAKE,EAAEa,UAAF,CAAa,GAAb,IAAoBD,eAAeE,IAAf,CAAoBd,CAApB,CAApB,GAA6C,IAAlD;AAAA,GAAtB;AACAY,iBAAed,OAAf,CAAuB,cAAM;AAC5B,OAAIiB,QAAQJ,cAAcK,OAAd,CAAsBC,EAAtB,CAAZ;AACA,OAAIF,QAAQ,CAAC,CAAb,EAAgBJ,cAAcO,MAAd,CAAqBH,KAArB,EAA4B,CAA5B;AAChB,GAHD;;AAKA;AACAJ,gBAAcb,OAAd,CAAsB,aAAK;AAC1BI,uBAAkBF,CAAlB,eAA6BA,CAA7B;AACA,GAFD;AAGA;;AAED;AACA,KAAImB,WAAW,IAAIC,QAAJ,CAAa,KAAb,EAAoB3B,GAApB,aACZQ,UADY,cAEZC,OAFY,sBAGJV,IAHI,aAIZ6B,IAJY,CAIP9B,GAJO,CAAf;;AAMA;AACA,QAAO4B,SAAS5B,GAAT,EAAcG,OAAd,CAAP;AACA;;AAED;QACSJ,K,GAAAA,K","file":"using.function.js","sourcesContent":["/** user the passed object to execute the given code */\nfunction using(obj, code, ref, refData) {\n\t/** replace html entities */\n\tconst decodingMap = [\n\t\t{ entity: '&lt;', char: '<' },\n\t\t{ entity: '&gt;', char: '>' },\n\t\t{ entity: '&quot;', char: '\"' },\n\t\t{ entity: '&amp;', char: '&' },\n\t\t{ entity: '&#10;', char: '\\n' },\n\t\t{ entity: '&#9;', char: '\\t' }\n\t];\n\tdecodingMap.forEach(m => {\n\t\tcode = code.replace(m.entity, m.char);\n\t});\n\n\t/** get the property and method names list */\n\tlet properties = '';\n\tlet methods = '';\n\tif (!Array.isArray(obj)) {\n\t\t/** get the property names */\n\t\tlet propertyNames = Object.getOwnPropertyNames(obj);\n\t\tpropertyNames.forEach(p => {\n\t\t\tproperties += `var ${p} = obj.${p}; `;\n\t\t});\n\n\t\t/** create list of private methods to remove */\n\t\tlet proto = Object.getPrototypeOf(obj);\n\t\tlet publicMethods = Object.getOwnPropertyNames(proto);\n\t\tlet privateMethods = ['constructor', '__defineGetter__', '__defineSetter__', 'hasOwnProperty', '__lookupGetter__', '__lookupSetter__', 'isPrototypeOf', 'propertyIsEnumerable', 'toString', 'valueOf', '__proto__', 'toLocaleString'];\n\t\tpublicMethods.forEach(m => m.startsWith('_') ? privateMethods.push(m) : null);\n\t\tprivateMethods.forEach(rm => {\n\t\t\tlet index = publicMethods.indexOf(rm);\n\t\t\tif (index > -1) publicMethods.splice(index, 1);\n\t\t});\n\n\t\t/** create a method string */\n\t\tpublicMethods.forEach(m => {\n\t\t\tmethods += `let ${m} = obj.${m}.bind(obj); `;\n\t\t});\n\t}\n\n\t/** create a function for executing the given code */\n\tlet withFunc = new Function('obj', ref, `\n\t\t${properties}\n\t\t${methods}\n\t\treturn (${code});\n\t`).bind(obj);\n\n\t/** execute the function */\n\treturn withFunc(obj, refData);\n}\n\n/** export the function */\nexport { using };"]}