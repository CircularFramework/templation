{"version":3,"sources":["../../src/functions/using.function.js"],"names":["using","obj","code","ref","refData","decodingMap","entity","char","forEach","replace","m","properties","methods","Array","isArray","propertyNames","Object","getOwnPropertyNames","p","proto","getPrototypeOf","publicMethods","privateMethods","startsWith","push","index","indexOf","rm","splice","withFunc","Function","bind"],"mappings":"sEAAA,uDACA,QAASA,MAAT,CAAeC,GAAf,CAAoBC,IAApB,CAA0BC,GAA1B,CAA+BC,OAA/B,CAAwC,CACvC,4BACA,GAAMC,aAAc,CACnB,CAAEC,OAAQ,MAAV,CAAkBC,KAAM,GAAxB,CADmB,CAEnB,CAAED,OAAQ,MAAV,CAAkBC,KAAM,GAAxB,CAFmB,CAGnB,CAAED,OAAQ,QAAV,CAAoBC,KAAM,GAA1B,CAHmB,CAInB,CAAED,OAAQ,OAAV,CAAmBC,KAAM,GAAzB,CAJmB,CAKnB,CAAED,OAAQ,OAAV,CAAmBC,KAAM,IAAzB,CALmB,CAMnB,CAAED,OAAQ,MAAV,CAAkBC,KAAM,IAAxB,CANmB,CAApB,CAQAF,YAAYG,OAAZ,CAAoB,WAAK,CACxBN,KAAOA,KAAKO,OAAL,CAAaC,EAAEJ,MAAf,CAAuBI,EAAEH,IAAzB,CACP,CAFD,EAIA,6CACA,GAAII,YAAa,EAAjB,CACA,GAAIC,SAAU,EAAd,CACA,GAAI,CAACC,MAAMC,OAAN,CAAcb,GAAd,CAAL,CAAyB,CACxB,6BACA,GAAIc,eAAgBC,OAAOC,mBAAP,CAA2BhB,GAA3B,CAApB,CACAc,cAAcP,OAAd,CAAsB,WAAK,CAC1BG,mBAAqBO,CAArB,WAAgCA,CAAhC,KACA,CAFD,EAIA,+CACA,GAAIC,OAAQH,OAAOI,cAAP,CAAsBnB,GAAtB,CAAZ,CACA,GAAIoB,eAAgBL,OAAOC,mBAAP,CAA2BE,KAA3B,CAApB,CACA,GAAIG,gBAAiB,CAAC,aAAD,CAAgB,kBAAhB,CAAoC,kBAApC,CAAwD,gBAAxD,CAA0E,kBAA1E,CAA8F,kBAA9F,CAAkH,eAAlH,CAAmI,sBAAnI,CAA2J,UAA3J,CAAuK,SAAvK,CAAkL,WAAlL,CAA+L,gBAA/L,CAArB,CACAD,cAAcb,OAAd,CAAsB,kBAAKE,GAAEa,UAAF,CAAa,GAAb,EAAoBD,eAAeE,IAAf,CAAoBd,CAApB,CAApB,CAA6C,IAAlD,CAAtB,EACAY,eAAed,OAAf,CAAuB,YAAM,CAC5B,GAAIiB,OAAQJ,cAAcK,OAAd,CAAsBC,EAAtB,CAAZ,CACA,GAAIF,MAAQ,CAAC,CAAb,CAAgBJ,cAAcO,MAAd,CAAqBH,KAArB,CAA4B,CAA5B,CAChB,CAHD,EAKA,6BACAJ,cAAcb,OAAd,CAAsB,WAAK,CAC1BI,gBAAkBF,CAAlB,WAA6BA,CAA7B,eACA,CAFD,CAGA,CAED,qDACA,GAAImB,UAAW,GAAIC,SAAJ,CAAa,KAAb,CAAoB3B,GAApB,UACZQ,UADY,UAEZC,OAFY,kBAGJV,IAHI,WAIZ6B,IAJY,CAIP9B,GAJO,CAAf,CAMA,2BACA,MAAO4B,UAAS5B,GAAT,CAAcG,OAAd,CACP,CAED,0B,QACSJ,K,CAAAA,K","file":"using.function.js","sourcesContent":["/** user the passed object to execute the given code */\nfunction using(obj, code, ref, refData) {\n\t/** replace html entities */\n\tconst decodingMap = [\n\t\t{ entity: '&lt;', char: '<' },\n\t\t{ entity: '&gt;', char: '>' },\n\t\t{ entity: '&quot;', char: '\"' },\n\t\t{ entity: '&amp;', char: '&' },\n\t\t{ entity: '&#10;', char: '\\n' },\n\t\t{ entity: '&#9;', char: '\\t' }\n\t];\n\tdecodingMap.forEach(m => {\n\t\tcode = code.replace(m.entity, m.char);\n\t});\n\n\t/** get the property and method names list */\n\tlet properties = '';\n\tlet methods = '';\n\tif (!Array.isArray(obj)) {\n\t\t/** get the property names */\n\t\tlet propertyNames = Object.getOwnPropertyNames(obj);\n\t\tpropertyNames.forEach(p => {\n\t\t\tproperties += `var ${p} = obj.${p}; `;\n\t\t});\n\n\t\t/** create list of private methods to remove */\n\t\tlet proto = Object.getPrototypeOf(obj);\n\t\tlet publicMethods = Object.getOwnPropertyNames(proto);\n\t\tlet privateMethods = ['constructor', '__defineGetter__', '__defineSetter__', 'hasOwnProperty', '__lookupGetter__', '__lookupSetter__', 'isPrototypeOf', 'propertyIsEnumerable', 'toString', 'valueOf', '__proto__', 'toLocaleString'];\n\t\tpublicMethods.forEach(m => m.startsWith('_') ? privateMethods.push(m) : null);\n\t\tprivateMethods.forEach(rm => {\n\t\t\tlet index = publicMethods.indexOf(rm);\n\t\t\tif (index > -1) publicMethods.splice(index, 1);\n\t\t});\n\n\t\t/** create a method string */\n\t\tpublicMethods.forEach(m => {\n\t\t\tmethods += `let ${m} = obj.${m}.bind(obj); `;\n\t\t});\n\t}\n\n\t/** create a function for executing the given code */\n\tlet withFunc = new Function('obj', ref, `\n\t\t${properties}\n\t\t${methods}\n\t\treturn (${code});\n\t`).bind(obj);\n\n\t/** execute the function */\n\treturn withFunc(obj, refData);\n}\n\n/** export the function */\nexport { using };"]}